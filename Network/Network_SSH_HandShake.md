# 사전 개념
## 1. SSL/TLS

* 원래 웹에서의 데이터는 가로채면 누구나 읽을 수 있는 일반 텍스트 형태로 전송이 되었다. 이러한 보안, 인증, 데이터 무결성을 보장하기 위해서 `SSL`이 개발되게 되었다.
* `SSL`은 암호화 기반 인터넷 보안 프로토콜이다. 전달되는 모든 데이터를 암호화하고 특정한 유형의 사이버 공격도 차단한다.  (현재는 취약점으로 사용되지 않음)
* `TLS`는 `SSL`의 업데이트 버전으로 최근 사용되는 암호화는 `TLS`라고 할 수 있다. `SSL`과 혼용해서 부르기도 함

## 2. HTTP
* Hyper Text Transfer Protocol의 약자로, 인터넷에서 데이터를 주고받을 수 있는 프로토콜을 의미합니다. HTTP는 무상태성을 가진 프로토콜이며, 이로 인해 서버는 세션과 같은 별도의 추가 정보를 관리하지 않아도 되고, 다수의 요청 처리 및 서버의 부하를 줄일 수 있는 성능 상의 이점이 있음.
* 기본적으로 TCP/IP 통신 위에서 동작.

## 3. HTTPS
* `HTTPS`는 `HTTP`에 `Secure`을 붙인 용어. 즉, `HTTPS`는 `HTTP`에서의 통신을 안전하게 보호하기 위한 구조라고 할 수 있음.


# HTTPS의 핸드 셰이크 (SSH HandShake)

## 1. 정의
> 통신을 하는 브라우저와 웹 서버가 서로 암호화 통신을 시작할 수 있도록, 신분을 확인하고, 필요한 정보를 클라이언트와 서버가 주고 받는 과정


## 2. 과정

### 0. Server(사이트)의 사전 작업
1. 사이트는 `CA`에 사이트 정보와 사이트 공개키를 보낸다.
2. `CA`는 자신의 개인 키로 사이트 정보와 사이트 공개 키에 대해 암호화하여 인증서를 생성한 뒤, 인증서를 사이트에게 전달한다.

### 1. 클라이언트에서 서버에 접속을 시도 (ClientHello)
* 사용자가 브라우저 주소창에서 www.kkogkkog.com을 전송하면, 브라우저는 해당 시스템의 웹 서버에 접속을 시도
* `HTTP` 연결은 `TCP` 연결의 일종이기 때문에, `3-Way Handshake`를 수행하고나서, `HTTPS`를 사용하는 것을 확인한 후, 브라우저는 다음 정보들을 전송.
  * 브라우저가 사용하는 `SSL`, `TLS`버전 정보
  * 브라우저가 지원하는 암호화 방식 
  * 브라우저가 순간적으로 생성한 임의의 난수
  * 이전에 `SSL` 핸드 셰이크가 완료된 상태면, 그때 생성된 세션 아이디

### 2. 서버는 클라이언트의 접속에 응답하고, 다음 정보를 클라이언트에게 반환 (ServerHello)
* 브라우전의 암호화 방식 정보 중에서, 서버가 지원하고 선택한 암호화 방식을 선택
* 서버의 `SSL`, `TLS` 버전 정보 전송
* 서버의 공개키가 담긴 `SSL` 인증서
* 서버가 순간적으로 생성한 임의의 난수

### 3. 브라우저는 서버의 SSL 인증서가 믿을만한지 확인
* 브라우저에는 공신력 있는 `CA`들의 정보와 `CA`가 만든 공개키가 이미 설치되어 있음. 서버가 보낸 `SSL` 인증서가 정말 `CA`가 만든 것인지를 확인하기 위해, 내장된 `CA` 공개키로 암호화된 인증서를 복호화함.
* 정상적으로 복호화가 되면, `CA`가 발급한 것이 증명. 아닐 경우 브라우저가 경고를 내보냄

### 4. 브라우저는 자신이 생성한 난수와 서버의 난수를 사용하여 premaster secret을 생성
* 웹 서버 인증서와 같이 전달된, 웹 사이트의 공개키로 이것을 암호화하여 서버로 전송

### 5. 서버는 비밀키를 통해서, 브라우저가 보낸 premaster secret을 생성
* 복호화 한 값을 `master secret`으로 저장. 이것을 사용하여 방금 브라우저와의 연결에 고유한 값을 보유하기 위해, `session key`를 생성. 이것으로 브라우저와 서버 사이에 주고받는 데이터를 암호화하고 복호화

### 6. SSL Handshake를 종료하고, HTTPS 통신을 시작
* 브라우저와 서버는 `SSL Handshake`가 정상적으로 완료되었고, 웹상에서 데이터를 `session key`를 사용하여 암호화/복호화하여 `HTTPS` 프로토콜을 통해 주고 받으면 됨


# 질문 리스트
### 1. `SSL`과 `TLS`의 차이점에 대해서 설명해주세요.
* SSL은 보안 소켓 계층이라는 의미로, 인터넷을 통해 전달되는 정보 보안의 안전한 거래를 위해 만들어진 인터넷 통신 규약 프로토콜을 말합니다.
* TLS은 SSL 3.0을 기초로 해서, 보다 더 안전성을 높이기 위해서 만들어진 프로토콜 입니다. TLS를 SSL이라고 부르기도 하기 때문에 공통되었다고 할 수 있지만, 엄밀히 말하면 현재 보안 문제로 인해서 SSL을 사용하지 않기 때문에 다르다고 할 수 있습니다.

### 2. `3-way-Handshake`와 `SSH HandShake`의 차이점에 대해서 설명해주세요.
* `3-way-HandShake`는 TCP 통신을 이용하여 데이터를 전송하기 위해 네트워크 연결을 설정하는 과정을 말합니다. 이를 좀더 구체적으로 말하면, TCP/IP 프로토콜을 이용해서 통신을 하는 응용 프로그래밍 데이터를 전송하기 전에, 먼저 정확한 전송을 보장하기 위해 상대방 컴퓨터와 세션을 수립하는 과정을 말합니다.
* 반면, `SSH HandShake`는 통신을 하는 브라우저와 웹 서버가 서로 암호화 통신을 할 수 있도록, 신분을 확인하고, 필요한 정보를 클라이언트와 서버가 주고 받는 과정을 말합니다. 즉, `3-way-HandShake`를 통해서 연결 여부를 파악하고, `HTTPS` 통신을 할 경우 `SSH HandShake`가 동작한다고 할 수 있습니다.

### 3. `HTTPS`를 적용한다면 보안이 완벽한가요?? 만약 그렇지 않다면, 어떤 부분이 문제이고, 해결책을 무엇인지 설명해주세요.
* HTTPS는 웹에서 보안을 적용하기 위한 가장 기본적인 단계입니다. 다양한 보안 이슈가 있을 수 있습니다. 예를들어, 전달 구간의 보안 기술이 아닌 웹 서버가 해킹을 당할경우, 모든 데이터가 유출 될 수 있습니다. 전달 구간에만 한정을 하더라도 중간자 공격을 수행할 수 있는 취약점이 있다면, HTTPS는 유지되지만 전달하는 내용은 고스란히 노출될 수 있습니다.
* 따라서, 이를 방지하기 위해 HTTPS를 수행하면서도 종단간 암호화 기술을 추가적으로 적용하여, HTTPS가 무력화 되더라도, 노출된 데이터는 암호화를 유지하여 읽을 수 없도록 하는 것이 좋습니다.
